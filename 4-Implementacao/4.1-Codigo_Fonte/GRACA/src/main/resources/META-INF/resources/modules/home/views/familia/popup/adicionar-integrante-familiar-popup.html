<md-dialog class="default-popup">

  	<md-toolbar style="height: 60px; min-height: 60px !important;">
  		<div flex layout="row" class="default-header">
  			<div >
	  			<h1 class="md-toolbar-tools" ng-if="$state.current.name == ADD_STATE">Adicionar Integrante Familiar</h1>
	  			<h1 class="md-toolbar-tools" ng-if="$state.current.name == EDIT_STATE">Editar Integrante Familiar</h1>
  			</div>
    	</div> 
  	</md-toolbar> 
  	
	<form name="model.integgranteFamiliar.form" style="height: 100%;" md-theme="{{osmTheme}}" layout="column" novalidate>
	  	<md-dialog-content layout="column" style="height: 100%;">
	  		<div layout="column" style="height:100%">
	  			<div class="default-form">
			        <div>
				        <div class="default-info" layout="row">Informações do item de contrato</div>
			        
			            <div >
				            <div layout="row" flex>
					            <md-input-container layout="column" flex>
						    		<label>Descrição completa</label>
						    		<textarea name="descricaoCompleta" ng-model="model.itemContrato.entity.descricaoCompleta" rows="3" required></textarea>
					                
					                <div ng-messages="model.itemContrato.form.descricaoCompleta.$error">
					               		<div ng-message="required" ng-if="model.itemContrato.form.$submitted">Campo obrigatório</div>
					                </div>
					            </md-input-container>
				            </div>
				            
				            <div layout="row">
				            	<md-input-container layout="column" flex="30">
						    		<label>EQUIP/MAT</label>
					                <input type="text" mask-money  prefix="'R$ '" name="EQUIP_MAT" ng-change="mathValorEquipamentoMaterialValorMaoDeObraValorUnitarioQuantidade()" ng-model="model.itemContrato.entity.valorEquipamentoMaterial" maxlength="144" >
					                
					                <div ng-messages="model.itemContrato.form.descricaoResumida.$error">
					               		<div ng-message="required" ng-if="model.itemContrato.form.$submitted">Campo obrigatório</div>
					                </div>
					            </md-input-container>
					            
					            <md-input-container layout="column" flex="30">
						    		<label>MDO</label>
					                <input type="text" mask-money prefix="'R$ '" name="MDO" ng-change="mathValorEquipamentoMaterialValorMaoDeObraValorUnitarioQuantidade()" ng-model="model.itemContrato.entity.valorMaoDeObra" maxlength="144" >
					                
					                <div ng-messages="model.itemContrato.form.descricaoResumida.$error">
					               		<div ng-message="required" ng-if="model.itemContrato.form.$submitted">Campo obrigatório</div>
					                </div>
					            </md-input-container>
					            
					            <md-input-container layout="column" flex="40"> 
							        <md-checkbox ng-model="model.itemContrato.entity.calcularBDI">
									  Calcular BDI?
									</md-checkbox>
		                        </md-input-container>
		                     </div>
		                        
							<div layout="row" flex>
		                       	<md-input-container layout="column" flex="35">
						    		<label>Quantidade</label>
					                <input type="number" ng-change="mathValorEquipamentoMaterialValorMaoDeObraValorUnitarioQuantidade()" name="quantidade" ng-model="model.itemContrato.entity.quantidade" maxlength="144" required>
					                
					                <div ng-messages="model.itemContrato.form.quantidade.$error">
					               		<div ng-message="required" ng-if="model.itemContrato.form.$submitted">Campo obrigatório</div>
					                </div>
				            	</md-input-container>
				            	
								<md-input-container layout="column" flex="25" style="margin-right: 10px; padding-top: 10px;">
									<label>Unidade de medida</label>
							        <md-select ng-model="model.itemContrato.entity.unidadeMedida" name="unidadeMedida" required>
										<md-option ng-repeat="unidadeMedida in model.unidadeMedida.page.content" ng-selected="unidadeMedida.id == model.itemContrato.entity.unidadeMedida.id" ng-value="unidadeMedida">{{unidadeMedida.sigla}}</md-option>
							        </md-select>
							        
							        <div ng-messages="model.itemContrato.form.unidadeMedida.$error">
					               		<div ng-message="required" ng-if="model.itemContrato.form.$submitted">Campo obrigatório</div>
					                </div>
								</md-input-container>
							</div>  
		                        
		                     <div layout="row">
				            	<md-input-container layout="column" flex="30">
						    		<label>Valor unitário</label>
					                <input ng-disabled="true" type="text" mask-money prefix="'R$ '" name="EQUIP_MAT" ng-model="model.itemContrato.entity.valorUnitario" readonly>
					            </md-input-container>
					            
					            <md-input-container layout="column" flex="30">
						    		<label>Valor total</label>
					                <input ng-disabled="true" type="text" mask-money prefix="'R$ '" name="MDO" ng-model="model.itemContrato.entity.valorTotal" readonly>
					            </md-input-container>
		                     </div>
	                     </div>
	            	</div>
	  			</div>
			</div>
	  	</md-dialog-content>
	  	
	  	<md-divider style="order: 2"></md-divider>
  	
	  	<md-dialog-actions layout="row" layout-align="end center">
		    <div layout="row" ng-if="model.integranteFamiliar.entity">
			    <div>
				    <md-button class="md-raised md-primary md-hue-3" type="button" ng-click="cancel()">
				    	Cancelar
				    </md-button>
			    </div>
			    
		    	<div >
		        	<md-button class="md-raised md-accent default-save-button" type="submit" ng-click="model.itemContrato.entity.id ? updateItemContrato() : addItemContrato()">
				    	SALVAR
				    </md-button>
				</div>
		    </div>
	    </md-dialog-actions>
  	</form> 
</md-dialog>